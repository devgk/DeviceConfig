function get_domain(){var e=window.location.href,s=e.split("/"),i=s[0]+"//"+s[2];return i}function finish_loading(){$(".body-base").css("opacity",""),setTimeout(function(){$(".loading-screen").animate({opacity:0},500,function(){$(this).remove(),$(".no-overflow").removeClass("no-overflow")})},2e3)}function get_parameter(e){var s=null,i=[];return location.search.substr(1).split("&").forEach(function(a){i=a.split("="),i[0]===e&&(s=decodeURIComponent(i[1]))}),s}function ui_render(e,s){try{"index"==e&&("AP"==s?($(".ap-mode-connected").css("display",""),$(".round-cta.ap-mode-block").addClass("active"),$(".sta-mode").css("display","")):"STA"==s?($(".ap-mode").css("display",""),$(".sta-mode-connected").css("display","")):($(".ap-mode").css("display",""),$(".sta-mode").css("display","")))}catch(e){}}function ui_test(){ui_render("index",get_parameter("wifi-mode"))}function get_wifi_mode(){try{$.ajax({method:"GET",url:get_domain()+"/wifi/api/v1/mode"}).done(function(e){try{var s=JSON.parse(e)}catch(e){}ui_render("index",s.message)}).fail(function(e){ui_render("index","")}).error(function(e){ui_render("index","")})}catch(e){}}function get_speakers(){var e="";try{var s={todo:"Check speaker count",result:"success",message:"Spkr_123_Left,Spkr_124_Left,Spkr_125_Right"},i=JSON.stringify(s);e=JSON.parse(i),e=e.message}catch(e){}return e.split(",")}function render_speaker_list(){try{$(".speaker-list-slider").slick({infinite:!1,vertical:!0,verticalSwiping:!0,swipeToSlide:!0,slidesToShow:2,slidesToScroll:1,centerMode:!0,centerPadding:"0",arrows:!1}),$(".speaker-list .speaker-slide").on("click",function(){var e=$(this).parents(".slick-slide");e.hasClass("slick-current")?$(this).find(".ico-speaker-test").addClass("repulsive").queue(function(){try{$.ajax({method:"GET",url:get_domain()+"/speakers/api/v1/select",data:{speakerID:$(this).data("id"),mode:$(this).data("position")}})}catch(e){}$(this).dequeue()}).delay(3e3).queue(function(){$(this).removeClass("repulsive").dequeue()}):$(this).parents(".speaker-list-slider").slick("slickGoTo",$(this).data("slide")).dequeue()}),setTimeout(function(){$(".no-display").removeClass("no-display"),$(".loading-indicator").animate({opacity:0},500,function(){$(this).remove()})},1e3)}catch(e){}}function set_speakers(){$(".load-speakers").each(function(){var e=get_speakers(),s="",i="";if("mono"==$(this).data("mode")){var a="#"+$(this).data("mode")+"-list-count";$(a).html(e.length);for(let i=0;i<e.length;i++){let a=e[i],t=a.split("_"),n='<div class="speaker-slide" data-slide="'+i+'">';n+='<div class="slide-content"><div class="speaker-set">',n+='<span class="ico ico-speaker-flat"></span>',n=n+'<span class="ico ico-speaker-test" data-id="'+t[1],n+='" data-position="mono"></span><span class="ico ico-ok"></span>',n=n+"</div><p>SPK "+t[1]+"</p></div></div>",s+=n}$(this).find(".speaker-list-slider").html(s)}if("left"==$(this).data("mode")||"right"==$(this).data("mode")){let a=0,t=0;for(let n=0;n<e.length;n++){let o=e[n],c=o.split("_");if("Left"==c[2]){let e='<div class="speaker-slide" data-slide="'+a+'">';e+='<div class="slide-content"><div class="speaker-set">',e+='<span class="ico ico-speaker-flat"></span>',e=e+'<span class="ico ico-speaker-test" data-id="'+c[1],e+='" data-position="left"></span><span class="ico ico-ok"></span>',e=e+"</div><p>SPK "+c[1]+"</p></div></div>",s+=e,a++}else if("Right"==c[2]){let e='<div class="speaker-slide" data-slide="'+t+'">';e+='<div class="slide-content"><div class="speaker-set">',e+='<span class="ico ico-speaker-flat"></span>',e=e+'<span class="ico ico-speaker-test" data-id="'+c[1],e+='" data-position="right"></span><span class="ico ico-ok"></span>',e=e+"</div><p>SPK "+c[1]+"</p></div></div>",i+=e,t++}}"left"==$(this).data("mode")?($("#left-list-count").html(a),$(this).find(".speaker-list-slider").html(s)):"right"==$(this).data("mode")&&($("#right-list-count").html(t),$(this).find(".speaker-list-slider").html(i))}}).delay(500).queue(function(){render_speaker_list()})}function events(){var e=window.location.href,s=e.replace(/((\w|\-)*\.html|(\?(\w|\-|\=)*))/gi,"");$(".drawer").on("click",function(){var e=$(".app-navigation");e.hasClass("open")?(e.removeClass("open"),$(".close-nav, .menu-item").removeClass("visible")):(e.addClass("open"),$(".close-nav, .menu-item").addClass("visible"))}),$(".close-nav").on("click",function(){var e=$(".app-navigation");e.hasClass("open")?(e.removeClass("open"),$(".close-nav, .menu-item").removeClass("visible")):(e.addClass("open"),$(".close-nav, .menu-item").addClass("visible"))}),$("[data-href]").on("click",function(){var e=s+$(this).data("href")+".html";barba.go(e)}),"complete-initial-setup.html"==e.replace(s,"")&&setInterval(function(){window.location=s+"speaker-mode.html"},2e3);try{get_wifi_mode()}catch(e){}try{set_speakers()}catch(e){}}barba.init({transitions:[{leave:function(e){var s=this.async();$(e.current.container).animate({opacity:0},250,function(){s()})},enter:function(e){var s=this.async();$(e.next.container).animate({opacity:1},250,function(){s(),events()})}}]}),window.addEventListener?window.addEventListener("load",function(){try{finish_loading()}catch(e){}try{events()}catch(e){}}):window.attachEvent("onload",function(){try{finish_loading()}catch(e){}try{events()}catch(e){}});
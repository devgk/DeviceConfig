function get_domain(){var e=window.location.href,i=e.split("/"),t=i[0]+"//"+i[2];return t}function splash_screen(){$(".body-base").css("opacity",""),setTimeout(function(){$(".loading-screen").animate({opacity:0},500,function(){$(this).remove(),$(".no-overflow").removeClass("no-overflow")})},2e3)}function get_parameter(e){var i=null,t=[];return location.search.substr(1).split("&").forEach(function(s){t=s.split("="),t[0]===e&&(i=decodeURIComponent(t[1]))}),i}function ui_functions(){var e=window.location.href,i=e.replace(/((\w|\-)*\.html|(\?(\w|\-|\=)*))/gi,"");$(".drawer").on("click",function(){var e=$(".app-navigation");e.hasClass("open")?(e.removeClass("open"),$(".close-nav, .menu-item").removeClass("visible")):(e.addClass("open"),$(".close-nav, .menu-item").addClass("visible"))}),$(".close-nav").on("click",function(){var e=$(".app-navigation");e.hasClass("open")?(e.removeClass("open"),$(".close-nav, .menu-item").removeClass("visible")):(e.addClass("open"),$(".close-nav, .menu-item").addClass("visible"))}),$("[data-href]").on("click",function(){var e=i+$(this).data("href")+".html";barba.go(e)}),"complete-initial-setup.html"==e.replace(i,"")&&setInterval(function(){window.location=i+"speaker-mode.html"},2e3)}function ui_render(e,i){try{"index"==e&&("AP"==i?($(".ap-mode-connected").css("display",""),$(".round-cta.ap-mode-block").addClass("active"),$(".sta-mode").css("display","")):"STA"==i?($(".ap-mode").css("display",""),$(".sta-mode-connected").css("display","")):($(".ap-mode").css("display",""),$(".sta-mode").css("display","")))}catch(e){}}function get_wifi_mode(){try{$.ajax({method:"GET",url:get_domain()+"/wifi/api/v1/mode"}).done(function(e){try{var i=JSON.parse(e)}catch(e){}ui_render("index",i.message)}).fail(function(e){ui_render("index","")}).error(function(e){ui_render("index","")})}catch(e){}}function render_speaker_list(){try{$(".speaker-list-slider").slick({infinite:!1,vertical:!0,verticalSwiping:!0,swipeToSlide:!0,slidesToShow:2,slidesToScroll:1,centerMode:!0,centerPadding:"0",arrows:!1}),$(".speaker-list .speaker-slide").on("click",function(){var e=$(this).parents(".slick-slide");e.hasClass("slick-current")?$(this).find(".ico-speaker-test").addClass("repulsive").queue(function(){try{$.ajax({method:"POST",url:get_domain()+"/speakers/api/v1/select",dataType:"json",contentType:"application/json",data:JSON.stringify({speakerID:toString($(this).data("id")),mode:$(this).data("position")})})}catch(e){}$(this).dequeue()}).delay(3e3).queue(function(){$(this).removeClass("repulsive").dequeue()}):$(this).parents(".speaker-list-slider").slick("slickGoTo",$(this).data("slide")).dequeue()}),setTimeout(function(){$(".no-display").removeClass("no-display"),$(".loading-indicator").animate({opacity:0},500,function(){$(this).remove()})},1e3)}catch(e){}}function render_speakers_list(e){$(".load-speakers").each(function(){var i="",t="";if("mono"==$(this).data("mode")){var s="#"+$(this).data("mode")+"-list-count";$(s).html(e.length);for(let t=0;t<e.length;t++){let s=e[t],a=s.split("_"),n='<div class="speaker-slide" data-slide="'+t+'">';n+='<div class="slide-content"><div class="speaker-set">',n+='<span class="ico ico-speaker-flat"></span>',n=n+'<span class="ico ico-speaker-test" data-id="'+a[1],n+='" data-position="mono"></span><span class="ico ico-ok"></span>',n=n+"</div><p>SPK "+a[1]+"</p></div></div>",i+=n}$(this).find(".speaker-list-slider").html(i)}if("left"==$(this).data("mode")||"right"==$(this).data("mode")){let s=0,a=0;for(let n=0;n<e.length;n++){let o=e[n],c=o.split("_");if("Left"==c[2]){let e='<div class="speaker-slide" data-slide="'+s+'">';e+='<div class="slide-content"><div class="speaker-set">',e+='<span class="ico ico-speaker-flat"></span>',e=e+'<span class="ico ico-speaker-test" data-id="'+c[1],e+='" data-position="left"></span><span class="ico ico-ok"></span>',e=e+"</div><p>SPK "+c[1]+"</p></div></div>",i+=e,s++}else if("Right"==c[2]){let e='<div class="speaker-slide" data-slide="'+a+'">';e+='<div class="slide-content"><div class="speaker-set">',e+='<span class="ico ico-speaker-flat"></span>',e=e+'<span class="ico ico-speaker-test" data-id="'+c[1],e+='" data-position="right"></span><span class="ico ico-ok"></span>',e=e+"</div><p>SPK "+c[1]+"</p></div></div>",t+=e,a++}}"left"==$(this).data("mode")?($("#left-list-count").html(s),$(this).find(".speaker-list-slider").html(i)):"right"==$(this).data("mode")&&($("#right-list-count").html(a),$(this).find(".speaker-list-slider").html(t))}}).delay(500).queue(function(){render_speaker_list()})}function create_speaker_list(){try{$.ajax({method:"GET",url:get_domain()+"/speakers/api/v1/list"}).done(function(e){var i=JSON.parse(e),t=i.message;render_speakers_list(t.split(","))}).fail(function(e,i,t){render_speakers_list(["Spkr_ERROR_Left"])})}catch(e){}}function send_speaker_config(e,i){try{$.ajax({method:"POST",url:get_domain()+"/speakers/api/v1/config",dataType:"json",contentType:"application/json",data:JSON.stringify({speakerID:e,mode:i})}).done(function(){var e=window.location.href,i=e.replace(/((\w|\-)*\.html|(\?(\w|\-|\=)*))/gi,"");window.location=i+"z-completed.html"})}catch(e){}}function confirm_selection(){$("#confirm-selection").on("click",function(){var e=id_left=id_right=!1,i=$(this).parents(".content").find(".load-speakers");i.each(function(){let i=$(this).data("mode");"mono"==i?e=$(this).find(".slick-current").find(".ico-speaker-test").data("id"):"left"==i?id_left=$(this).find(".slick-current").find(".ico-speaker-test").data("id"):"right"==i&&(id_right=$(this).find(".slick-current").find(".ico-speaker-test").data("id"))}),console.log("mode: "+id_left),e?send_speaker_config(e,"mono"):(id_left||id_right)&&send_speaker_config(toString(id_left+","+id_right),"stereo")})}function function_sequence(){try{ui_functions()}catch(e){}try{get_wifi_mode()}catch(e){}try{create_speaker_list()}catch(e){}try{confirm_selection()}catch(e){}}barba.init({transitions:[{leave:function(e){var i=this.async();$(e.current.container).animate({opacity:0},250,function(){i()})},enter:function(e){var i=this.async();$(e.next.container).animate({opacity:1},250,function(){i(),function_sequence()})}}]}),window.addEventListener?window.addEventListener("load",function(){try{splash_screen()}catch(e){}try{function_sequence()}catch(e){}}):window.attachEvent("onload",function(){try{splash_screen()}catch(e){}try{function_sequence()}catch(e){}});